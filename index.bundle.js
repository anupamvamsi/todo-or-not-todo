(()=>{"use strict";var t={864:(t,e,o)=>{o.r(e)},311:(t,e,o)=>{o.r(e)},807:(t,e,o)=>{o.r(e)},203:(t,e,o)=>{o.r(e)},729:(t,e,o)=>{o.r(e)}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var d=e[s]={exports:{}};return t[s](d,d.exports,o),d.exports}o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{class t{static content=document.querySelector("#content");static getElementOfSelector(t){return document.querySelector(t)}static getHomeNumItemsElement(){return t.getSidebarHomeList().firstElementChild}static getNumItemsElement(e){return"Home"===e.title?t.getHomeNumItemsElement():t.getSidebarListElement(e).firstElementChild}static getSidebarHomeList(){return document.querySelector(".sidebar-items>li>a")}static getSidebarListElements(){return document.querySelectorAll(".sidebar-todo-lists>li")}static getSidebarListsContent(){const e=t.getSidebarListElements(),o=[];return e.forEach((t=>o.push(t.textContent))),o}static getSidebarListElement(e){if("Home"===e.title)return this.getSidebarHomeList();let o;return t.getSidebarListElements().forEach((t=>{t.firstChild.textContent===e.title&&(o=t)})),o}}class e{constructor(){}static createElementAndAddTextContent(t,e){let o=document.createElement(t);return o.textContent=e,o}static addMultipleClasses(t,...e){return e.forEach((e=>{t.classList.add(e)})),t}static createEleAndAddClasses(t,...o){let s=document.createElement(t);return s=e.addMultipleClasses(s,...o),s}static createElementWTCAndClasses(t,o,...s){let i=e.createElementAndAddTextContent(t,o);return i=e.addMultipleClasses(i,...s),i}static createEleAndAddAttributes(t,...e){let o=document.createElement(t);return e.forEach((t=>{o[t[0]]=t[1]})),o}static appendChildren(t,...e){e.forEach((e=>{t.appendChild(e)}))}static setMultipleAttributes(t,e){Object.keys(e).forEach((o=>{t.setAttribute(o,e[o])}))}}class s{constructor(t,e,o,s,i="Home",d=!1){this.title=t,this.description=e,this.dueDate=o,this.priority=s,this.parentList=i||"Home",this.isDone=d}changeItemStatus(){this.isDone=!this.isDone}changeItemPriority(t){this.priority=t}}class i{constructor(t,e){this.title=t,this.description=e,this.children=[]}}class d{static todoItems=[];static todoLists=[];constructor(){}static updateStorage(){localStorage.setItem("todoItems",JSON.stringify(d.todoItems)),localStorage.setItem("todoLists",JSON.stringify(d.todoLists))}static getFromStorage(){const t=JSON.parse(localStorage.getItem("todoItems"));JSON.parse(localStorage.getItem("todoLists")).forEach((t=>{let e=t;e=d.createToDoList(e.title,e.description,e.children)})),t.forEach((t=>{let e=t;e=d.createToDoItem(e.title,e.description,e.dueDate,e.priority,e.parentList,e.isDone)}))}static getToDoItemIdx(t){return d.todoItems.indexOf(t)}static getToDoListIdx(t){return d.todoLists.indexOf(t)}static removeToDoItem(t){const e=d.getToDoItemIdx(t);d.todoItems.splice(e,1)}static removeToDoItemFromToDoList(t){const e=d.getToDoList(t.parentList),o=d.getToDoListIdx(e),s=d.todoLists[o].children.indexOf(t);d.todoLists[o].children.splice(s,1)}static getToDoList(t){let e;return d.getToDoListTitles().includes(t)&&(e=d.todoLists.filter((e=>e.title===t))[0]),e}static getToDoListTitles(){let t=[];return d.todoLists.forEach((e=>{t.push(e.title)})),t}static addChildToList(t,e){d.getToDoList(t).children.push(e)}static addItemToParentList(t){d.isAListTitle(t.parentList)||d.createToDoList(t.parentList,""),d.addChildToList(t.parentList,t)}static createToDoItem(t,e,o,i,a,n){const l=new s(t,e,o,i,a,n);d.todoItems.push(l),d.addItemToParentList(l);const c=d.getToDoList(l.parentList);return r.updateNumItemsOfListInSidebar(c,d.todoItems),l}static isAListTitle(t){return!!d.getToDoListTitles().includes(t)}static createToDoList(e,o){let s;return d.isAListTitle(e)||(s=new i(e,o),d.todoLists.push(s),"Home"===e?t.getSidebarHomeList().addEventListener("click",(function(){r.displayToDoList(s,d.todoItems)})):r.addToDoListToSidebar(s,d.todoItems)),s}}class a{static createFormHead(t){const o=e.createElementWTCAndClasses("h3","Add new todo","form-head");t.appendChild(o)}static createFormTitle(t){const o=e.createElementWTCAndClasses("label","Title","form-title-label");o.setAttribute("for","add-title");const s=e.createEleAndAddClasses("input","form-title-inp");s.id="add-title",s.maxlength=30,s.required=!0,s.title="Todo title",e.appendChildren(t,o,s)}static createFormDesc(t){const o=e.createElementWTCAndClasses("label","Description (Optional)","form-desc-label");o.setAttribute("for","add-desc");const s=e.createEleAndAddClasses("textarea","form-desc-inp");s.id="add-desc",s.rows=8,s.cols=25,s.maxlength=200,s.title="To do description (optional)",e.appendChildren(t,o,s)}static createParentListField(o){const s=e.createElementWTCAndClasses("label","Add to list","form-list-label");s.setAttribute("for","add-list");const i=e.createEleAndAddClasses("input","form-list-inp");i.id="add-list",i.value=t.getElementOfSelector(".todo-list-title").textContent,i.maxlength=15,i.title="Parent Todo List",e.appendChildren(o,s,i)}static createDatePicker(){const t=e.createElementWTCAndClasses("label","Due date","form-date-label");t.setAttribute("for","add-date");const o=e.createEleAndAddClasses("input","form-date-inp");o.id="add-date",o.type="date",o.required=!0,o.title="Due date";const s=e.createEleAndAddClasses("div","form-date-container");return e.appendChildren(s,t,o),s}static createPriorityPicker(){const t=e.createElementWTCAndClasses("label","Priority","form-priority-label");t.setAttribute("for","add-priority");const o=e.createEleAndAddAttributes("select",["id","add-priority"],["title","Priority"],["required",!0]);for(let t=1;t<5;t++){let s=e.createEleAndAddAttributes("option",["value",t]);s.textContent=t,o.appendChild(s)}o.classList.add("todo-priority"),o.classList.add("p"+o.value);let s="p"+o.value;o.addEventListener("change",(function(){o.classList.remove(s),o.classList.add("p"+o.value),s="p"+o.value}));const i=e.createEleAndAddClasses("div","form-priority-container");return e.appendChildren(i,t,o),i}static createDoneCheckbox(){const t=e.createElementWTCAndClasses("label","Done?","form-done-label");t.setAttribute("for","add-done");const o=e.createEleAndAddAttributes("input",["id","add-done"],["type","checkbox"],["name","isDone"],["title","To do item done?"]),s=e.createEleAndAddClasses("div","form-done-container");return e.appendChildren(s,t,o),s}static createFormSubmit(){return e.createElementWTCAndClasses("button","Create","form-submit")}static createFormCancel(){const t=e.createElementWTCAndClasses("button","Cancel","form-cancel");return t.type="button",t}static createAddToDoForm(){const t=e.createEleAndAddClasses("form","form-todo-add");t.action="",t.method="",a.createFormHead(t),a.createFormTitle(t),a.createParentListField(t);const o=a.createDatePicker(),s=a.createPriorityPicker(),i=a.createDoneCheckbox(),d=e.createEleAndAddClasses("div","form-date-and-priority");e.appendChildren(d,o,s,i),t.appendChild(d);const r=a.createFormSubmit(t),n=a.createFormCancel(t),l=e.createEleAndAddClasses("div","form-buttons");return e.appendChildren(l,r,n),t.appendChild(l),t}}class r{static attachEventListenerSidebarList(t,e,o){t.addEventListener("click",(function(){r.displayToDoList(e,o)}))}static attachEventListenerToDoItem(t,e,o,s,i,a){e.addEventListener("change",(function(){t.changeItemStatus(),d.updateStorage()})),s.addEventListener("change",(function(){t.dueDate=s.value,d.updateStorage()})),i.addEventListener("change",(function(){const e="p"+t.priority;i.classList.remove(e),t.changeItemPriority(i.value),i.classList.add("p"+i.value)})),a.addEventListener("click",(function(){a.parentNode.parentNode.remove(),d.removeToDoItem(t),d.removeToDoItemFromToDoList(t),r.updateNumItemsOfListInSidebar(d.getToDoList(t.parentList),d.todoItems)}))}static removeEventListenerAddToDo(t){t.removeEventListener("click",r.addNewToDo)}static submitAddToDoForm(e){e.preventDefault();const o=t.getElementOfSelector("#add-title"),s=t.getElementOfSelector("#add-date"),i=t.getElementOfSelector("#add-priority"),a=t.getElementOfSelector("#add-list"),n=t.getElementOfSelector("#add-done").checked;if(o.checkValidity()?s.checkValidity()||s.reportValidity():o.reportValidity(),o.checkValidity()&&s.checkValidity()){d.createToDoItem(o.value,"",s.value,i.value,a.value,n);const t=document.querySelector(".todo-list-title").textContent;r.displayToDoList(d.getToDoList(t),d.todoItems)}}static cancelAddToDoForm(e){const o=t.getElementOfSelector(".add-todo-form-container"),s=r.constructAddToDoItem();o.parentNode.appendChild(s),o.parentNode.removeChild(o)}static addNewToDo(e){const o=t.getElementOfSelector(".add-todo-container");o.textContent="";const s=a.createAddToDoForm();o.appendChild(s),o.classList.remove("add-todo-container"),o.classList.add("add-todo-form-container"),r.removeEventListenerAddToDo(o),o.scrollIntoView(),t.getElementOfSelector(".form-submit").addEventListener("click",r.submitAddToDoForm),t.getElementOfSelector(".form-cancel").addEventListener("click",r.cancelAddToDoForm)}static attachEventListenerAddToDo(t){t.addEventListener("click",r.addNewToDo)}static updateNumItemsOfListInSidebar(o,s){const i=t.getSidebarHomeList("Home"),d=t.getSidebarListElement(o);let a=t.getNumItemsElement(o),r=t.getHomeNumItemsElement();const n=o.children.length,l=s.length;r||(r=e.createElementAndAddTextContent("span",l),r.classList.add("num-todo-items"),i.appendChild(r)),a||"Home"===o.title?(a.textContent=n,r.textContent=l):(a=e.createElementAndAddTextContent("span",n),a.classList.add("num-todo-items"),d.appendChild(a))}static addToDoListToSidebar(o,s){let i;if(!t.getSidebarListsContent().includes(o.title)&&"Home"!=o.title){const t=document.querySelector(".sidebar-todo-lists");i=e.createElementAndAddTextContent("li",o.title),t.appendChild(i),r.updateNumItemsOfListInSidebar(o,s)}return r.attachEventListenerSidebarList(i,o,s),i}static constructPriorityElement(t){const o=e.createEleAndAddAttributes("select",["title","Priority"],["required",!0]);for(let s=1;s<5;s++){let i=e.createEleAndAddAttributes("option",["value",s]);i.textContent=s,s===Number(t.priority)&&(i.selected=!0),o.appendChild(i)}return o.classList.add("todo-priority"),o.classList.add("p"+o.value),o}static constructToDoItem(t){const o=e.createEleAndAddAttributes("input",["type","checkbox"],["name","isDone"],["title","To do item done?"]);t.isDone&&o.setAttribute("checked",!0);const s=e.createElementWTCAndClasses("h3",t.title,"todo-title"),i=e.createEleAndAddAttributes("input",["type","date"],["value",t.dueDate]);i.classList.add("todo-due");const d=r.constructPriorityElement(t),a=e.createEleAndAddClasses("div","todo-info");e.appendChildren(a,o,s);const n=e.createElementWTCAndClasses("span","Remove","todo-remove"),l=e.createEleAndAddClasses("div","todo-manip");e.appendChildren(l,i,d,n);const c=e.createEleAndAddClasses("div","todo-item");return e.appendChildren(c,a,l),r.attachEventListenerToDoItem(t,o,s,i,d,n),c}static constructAddToDoItem(){const t=e.createElementWTCAndClasses("p","+","add-todo-plus"),o=e.createElementWTCAndClasses("h3","Add item","add-todo-txt"),s=e.createEleAndAddClasses("div","add-todo-container");return e.appendChildren(s,t,o),r.attachEventListenerAddToDo(s),s}static constructToDoList(t,o){const s=e.createElementWTCAndClasses("h2",t.title,"todo-list-title"),i=e.createEleAndAddClasses("div",".todo-list-title-container");e.appendChildren(i,s);let a=document.querySelector(".todo-list");a?a.textContent="":a=e.createEleAndAddClasses("div","todo-list"),e.appendChildren(a,i);const n=e.createEleAndAddClasses("div","todo-items");let l;return l="Home"===t.title?o:t.children,l.forEach((t=>{n.appendChild(r.constructToDoItem(t))})),n.appendChild(r.constructAddToDoItem()),n.addEventListener("click",d.updateStorage),a.appendChild(n),a}static displayToDoList(e,o){const s=r.constructToDoList(e,o);t.content.appendChild(s)}}class n{static storageAvailable(t){let e;try{e=window[t];const o="__storage_test__";return e.setItem(o,o),e.removeItem(o),!0}catch(t){return console.log(t.code,t.name),t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_NOT_AVAILABLE"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}static checkStorageAvailable(t){return!!n.storageAvailable(t)}}function l(){d.createToDoList("Home","A list of all your tasks"),d.createToDoList("Chores","A list of all your tasks"),d.createToDoList("Scooby","A list of all your tasks"),d.createToDoList("Main","A list of all your tasks"),d.createToDoList("Flutes","A list of all your tasks"),d.createToDoItem("First","blah ","2020-04-12","1","",!0),d.createToDoItem("Premier","blah ","2020-04-18","2","Scooby",!1),d.createToDoItem("Second","blah blah","2020-04-23","4","Chores",!1),d.createToDoItem("Deuxieme","blah ","2020-04-29","3","Home",!0)}o(864),o(203),o(807),o(729),o(311),n.checkStorageAvailable("localStorage")?localStorage.getItem("todoItems")||localStorage.getItem("todoLists")?d.getFromStorage():(l(),d.updateStorage()):l(),r.displayToDoList(d.getToDoList("Home"),d.todoItems),r.constructAddToDoItem()})()})();